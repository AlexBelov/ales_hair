(function(a){a.fn.productColorizer=function(b){var c={transparency:.55,swatchTransparency:.75,secondaryTransparency:.55,swatchClass:".swatch"};var b=a.extend(c,b);return this.each(function(){function h(a){var b=parseInt(a[0]);var c=parseInt(a[1]);var d=parseInt(a[2]);var e=d|c<<8|b<<16;return e.toString(16)}var c=b;var d=a(this);var e=d.find(c.swatchClass);var f=d.find(c.swatchClass+" a");var g=d.find(".mask");a(f).each(function(){var b="rgba("+a(this).attr("rel")+","+c.swatchTransparency+")";a(this).html("<span>"+a(this).html()+"</span>");a(this).find("span").css("background",b);if(a.browser.msie){b=a(this).attr("rel");var d=b.split(",");b="#"+h(d);a(this).find("span").css({"background-color":b})}});a(f).click(function(b){b.preventDefault();a(f).removeClass("active");a(this).addClass("active");var d="rgba("+a(this).attr("rel")+","+c.transparency+")";var e=a(this).attr("href");if(a(e).attr("role")){a(e).empty();var g=Raphael(e.substring(1),a(e).width(),a(e).height());var i={fill:"rgb("+a(this).attr("rel")+")",opacity:c.secondaryTransparency,"stroke-width":0};g.path(a(e).attr("role")).attr(i)}else{a(e).css({"background-color":d},1e3);if(a.browser.msie){d=a(this).attr("rel");var j=d.split(",");d=h(j);a(e).css({background:"transparent",zoom:1,filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#80"+d+",endColorstr=#80"+d+")"})}}});a(f).hover(function(b){b.preventDefault();var c=a(this).offset().left-a(this).parent().offset().left;var d=a(this).offset().top-a(this).parent().offset().top+25;var e=a(this).attr("title");if(!a.browser.msie)a(this).removeAttr("title");a(this).after('<div class="colorizer-tooltip"><div class="colorizer-pointer-up"><div class="colorizer-pointer-up-inner"></div></div><span class="colorizer-tooltip-text">'+e+"</span></div>");var f=a(".colorizer-tooltip").width()/2-12;a(".colorizer-tooltip").css({left:c-f,top:d})},function(){var b=a(".colorizer-tooltip-text").html();a(this).attr("title",b);a(".colorizer-tooltip").remove()});})}})(jQuery)